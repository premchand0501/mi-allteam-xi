{"version":3,"sources":["webpack:///./src/widgets/all-team/widget-layout-1.ts"],"names":[],"mappings":"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","file":"all-team--widget-layout-1.chunk.js","sourcesContent":["import { Controller } from \"stimulus\";\nimport { ApplicationObj } from '../../main';\nimport { PlayerInfo, AllTeamData, AllTeamMethods, AllTeamComputedProperties } from './all-team.interface';\nimport Vue from 'vue'\n\nimport { polyfill } from \"mobile-drag-drop\";\n\n// optional import of scroll behaviour\nimport { scrollBehaviourDragImageTranslateOverride } from \"mobile-drag-drop/scroll-behaviour\";\n\n// options are optional ;)\npolyfill({\n  // use this to make use of the scroll behaviour\n  dragImageTranslateOverride: scrollBehaviourDragImageTranslateOverride\n});\n\nclass AllTeamXI extends Controller {\n  // squadList: SquadInfo[];\n  // squadListTarget: HTMLUListElement;\n  // static targets = ['squadList'];\n  connect() {\n    console.log('all team xi connected');\n\n    this.initVueComponent();\n  }\n  initVueComponent() {\n    new Vue<AllTeamData, AllTeamMethods, AllTeamComputedProperties>({\n      el: '#allTeam',\n      data: {\n        squadList: [],\n        filteredSquadList: [],\n        selectedSquad: [],\n        toggleSelectedSquadList: false,\n        allowedSelectionCount: 11,\n        filterText: '',\n        searchText: '',\n        selectionStep: 1,\n        captainId: '',\n        viceCaptainId: '',\n        focusedCaptainVCId: '',\n        openSelection: false,\n        deletedPlayers: [],\n        dragOverPlayerId: '',\n        dragStartPlayer: '',\n        allowedOverseasPlayers: 4,\n      },\n      computed: {\n        getPlayersLeft() {\n          return (this.allowedSelectionCount - this.selectedSquad.length) + '/' + this.allowedSelectionCount;\n        },\n        getForeignPlayersLeft() {\n          const overseas = this.selectedSquad.filter(player => player.nationality.toLowerCase() !== 'india')\n          return (this.allowedOverseasPlayers - overseas.length) + '/' + this.allowedOverseasPlayers;\n        },\n        getFilteredSquadList() {\n          if (this.filterText) {\n            const filtered = this.squadList.filter((s: PlayerInfo) => s.season_year === this.filterText);\n            if (this.searchText) {\n              return filtered.filter((s: PlayerInfo) => s.name.toLowerCase().includes(this.searchText.toLowerCase()) && s.season_year === this.filterText);\n            }\n            else {\n              return filtered;\n            }\n          }\n          else if (this.searchText) {\n            return this.squadList.filter((s: PlayerInfo) => s.name.toLowerCase().includes(this.searchText.toLowerCase()));\n          }\n          return this.squadList;\n        },\n        mobileDevice() {\n          return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\n        },\n      },\n      methods: {\n        shortenPlayerName(name): string {\n          const wordArr = name.split(' ');\n          if (wordArr.length === 1) {\n            return name;\n          }\n          else if (wordArr.length > 1) {\n            const firstWord = wordArr[0];\n            const firstLetter = firstWord.slice(0, 1) + '. ';\n            const remaining = wordArr.filter((_, i) => i > 0);\n            const remainingName = remaining.join(' ');\n            return firstLetter + remainingName;\n          }\n          return ''\n        },\n        selectPlayer(player: PlayerInfo) {\n          const index = this.deletedPlayers[0];\n          const squad = this.selectedSquad.map((p, ind) => {\n            if (ind === index) {\n              p = player;\n              this.deletedPlayers.shift();\n            }\n            return p;\n          });\n          if (this.deletedPlayers.length === 0) {\n            this.openSelection = false;\n          }\n          this.selectedSquad = squad;\n          console.log(this.selectedSquad.length);\n        },\n        removePlayer(player: PlayerInfo) {\n          const squadList = this.selectedSquad.map((p: PlayerInfo, index: number) => {\n            if (p.id === player.id) {\n              this.deletedPlayers.push(index);\n              delete p.id;\n            }\n            return p;\n          });\n          this.selectedSquad = squadList;\n          this.$forceUpdate();\n        },\n        selectCaptainVC(player: PlayerInfo, type: string) {\n          if (type === 'c') {\n            if (this.captainId === this.focusedCaptainVCId) {\n              this.captainId = ''\n            }\n            else {\n              if (player.id === this.viceCaptainId) {\n                this.viceCaptainId = ''\n              }\n              this.captainId = player.id\n            }\n          }\n          else if (type === 'vc') {\n            if (this.viceCaptainId === this.focusedCaptainVCId) {\n              this.viceCaptainId = ''\n            }\n            else {\n              if (player.id === this.captainId) {\n                this.captainId = ''\n              }\n              this.viceCaptainId = player.id\n            }\n          }\n        },\n        addRemoveInSquad(player: PlayerInfo) {\n          if (!this.selectedSquad.length) {\n            if (player.nationality.toLowerCase() === 'india') {\n              this.selectedSquad.push(player);\n            }\n            else {\n              const overseas = this.selectedSquad.filter(player => player.nationality.toLowerCase() !== 'india');\n\n              if (overseas.length < this.allowedOverseasPlayers)\n                this.selectedSquad.push(player);\n              else\n                alert('Only 4 overseas players allowed');\n            }\n            return;\n          }\n          const foundIndex: number = this.selectedSquad.indexOf(player);\n          if (foundIndex > -1) {\n            this.selectedSquad.splice(foundIndex, 1);\n          }\n          else {\n            if (this.selectedSquad.length === this.allowedSelectionCount) {\n              alert('11 players are selected already, please remove any player to add another.');\n              return;\n            }\n            if (player.nationality.toLowerCase() === 'india') {\n              this.selectedSquad.push(player);\n            }\n            else {\n              const overseas = this.selectedSquad.filter(player => player.nationality.toLowerCase() !== 'india');\n\n              if (overseas.length < this.allowedOverseasPlayers)\n                this.selectedSquad.push(player);\n              else\n                alert('Only 4 overseas players allowed');\n            }\n          }\n        },\n        async fetchPlayers() {\n          const res: PlayerInfo[] = (await (await fetch('/squad.json')).json()) as PlayerInfo[];\n          console.log(res);\n          if (res.length) {\n            this.squadList = res;\n            this.selectedSquad = this.squadList.slice(0, 11);\n          }\n        },\n        handleDrop(index: number) {\n          const squad = this.selectedSquad;\n          const droppedOnPlayer = squad[index];\n          let droppingPlayerId = -1;\n          const droppingPlayer = squad.filter((player, index) => {\n            if (this.dragStartPlayer === player.id) {\n              droppingPlayerId = index;\n              return player;\n            }\n          });\n          squad[index] = droppingPlayer[0];\n          squad[droppingPlayerId] = droppedOnPlayer;\n          this.selectedSquad = squad;\n          this.dragOverPlayerId = '';\n        },\n        handleDragOver(playerId: string) {\n          this.dragOverPlayerId = playerId;\n        },\n        handleDragStart(playerId: string) {\n          this.dragStartPlayer = playerId;\n        },\n        handleDragEnter(playerId: string) {\n          if (this.mobileDevice)\n            this.dragStartPlayer = playerId;\n        },\n      },\n      mounted() {\n        this.fetchPlayers();\n      }\n    })\n  }\n}\nexport default () => ApplicationObj.register('all-team--widget-layout-1', AllTeamXI)"],"sourceRoot":""}